(this["webpackJsonpmarvel-wiki"]=this["webpackJsonpmarvel-wiki"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),i=s(5),r=s.n(i),n=s(4),l=s(3),o=s(1);var h=()=>Object(o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{margin:"0 auto",background:"none",display:"block"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(o.jsx)("g",{transform:"translate(80,50)",children:Object(o.jsx)("g",{transform:"rotate(0)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"1",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.875s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.875s"})]})})}),Object(o.jsx)("g",{transform:"translate(71.21320343559643,71.21320343559643)",children:Object(o.jsx)("g",{transform:"rotate(45)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.875",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.75s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.75s"})]})})}),Object(o.jsx)("g",{transform:"translate(50,80)",children:Object(o.jsx)("g",{transform:"rotate(90)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.75",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.625s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.625s"})]})})}),Object(o.jsx)("g",{transform:"translate(28.786796564403577,71.21320343559643)",children:Object(o.jsx)("g",{transform:"rotate(135)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.625",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.5s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.5s"})]})})}),Object(o.jsx)("g",{transform:"translate(20,50.00000000000001)",children:Object(o.jsx)("g",{transform:"rotate(180)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.5",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.375s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.375s"})]})})}),Object(o.jsx)("g",{transform:"translate(28.78679656440357,28.786796564403577)",children:Object(o.jsx)("g",{transform:"rotate(225)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.375",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.25s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.25s"})]})})}),Object(o.jsx)("g",{transform:"translate(49.99999999999999,20)",children:Object(o.jsx)("g",{transform:"rotate(270)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.25",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.125s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.125s"})]})})}),Object(o.jsx)("g",{transform:"translate(71.21320343559643,28.78679656440357)",children:Object(o.jsx)("g",{transform:"rotate(315)",children:Object(o.jsxs)("circle",{cx:"0",cy:"0",r:"7",fill:"#1c4595",fillOpacity:"0.125",children:[Object(o.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",values:"1.5 1.5;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),Object(o.jsx)("animate",{attributeName:"fillOpacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"0s"})]})})})]}),d=s.p+"static/media/error.42292aa1.gif";var m=()=>Object(o.jsx)("img",{style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"},src:d,alt:"Error"});var j=class{constructor(){var e=this;this._apiBase="https://gateway.marvel.com:443/v1/public/",this._apiKey="apikey=5c038bd6ce84d9ec6fa43f3dab859913",this._baseOffset=210,this.getResource=async e=>{let t=await fetch(e);if(!t.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(t.status));return await t.json()},this.getAllCharacters=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._baseOffset;return(await e.getResource("".concat(e._apiBase,"characters?limit=9&offset=").concat(t,"&").concat(e._apiKey))).data.results.map(e._transformCharacter)},this.getCharacter=async e=>{const t=await this.getResource("".concat(this._apiBase,"characters/").concat(e,"?").concat(this._apiKey)),s=this._transformCharacter(t.data.results[0]);return 0===s.description.length&&(s.description="The hero is really cool, but not Deadpool :) lol"),s.description.length>=200&&(s.description="".concat(s.description.slice(0,180),"...And Bla-bla-bla, Deadpool is better.")),s},this.getAllComics=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._baseOffset;return(await e.getResource("".concat(e._apiBase,"comics?limit=8&offset=").concat(t,"&").concat(e._apiKey))).data.results.map(e._transformComics)},this.getComic=async e=>{const t=await this.getResource("".concat(this._apiBase,"comics/").concat(e,"?").concat(this._apiKey));return this._transformComics(t.data.results[0])},this._transformCharacter=e=>({id:e.id,name:e.name,description:e.description,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}),this._transformComics=e=>{var t;return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," p."):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:(null===(t=e.textObjects[0])||void 0===t?void 0:t.language)||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}}}},b=(s(15),s.p+"static/media/mjolnir.61f31e18.png");class u extends a.Component{constructor(){super(...arguments),this.state={character:{},loading:!0,error:!1},this.marvelService=new j,this.onCharacterLoaded=e=>{this.setState({character:e,loading:!1})},this.onError=()=>{this.setState({loading:!1,error:!0})},this.onCharacterLoading=()=>{this.setState({loading:!0})},this.updateCharacter=()=>{const e=Math.floor(400*Math.random()+1011e3);this.onCharacterLoading(),this.marvelService.getCharacter(e).then(this.onCharacterLoaded).catch(this.onError)}}componentDidMount(){this.updateCharacter()}render(){const e=this.state.error?Object(o.jsx)(m,{}):null,t=this.state.loading?Object(o.jsx)(h,{}):null,s=this.state.loading||this.state.error?null:Object(o.jsx)(p,{character:this.state.character});return Object(o.jsxs)("div",{className:"randomchar",children:[e,t,s,Object(o.jsxs)("div",{className:"randomchar__static",children:[Object(o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(o.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(o.jsx)("button",{className:"button button__main",onClick:this.updateCharacter,children:Object(o.jsx)("div",{className:"inner",children:"try it"})}),Object(o.jsx)("img",{src:b,alt:"mjolnir",className:"randomchar__decoration"})]})]})}}const p=e=>{let t={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===e.character.thumbnail&&(t={objectFit:"contain"}),Object(o.jsxs)("div",{className:"randomchar__block",children:[Object(o.jsx)("img",{src:e.character.thumbnail,alt:"Random character",className:"randomchar__img",style:t}),Object(o.jsxs)("div",{className:"randomchar__info",children:[Object(o.jsx)("p",{className:"randomchar__name",children:e.character.name}),Object(o.jsx)("p",{className:"randomchar__descr",children:e.character.description}),Object(o.jsxs)("div",{className:"randomchar__btns",children:[Object(o.jsx)("a",{href:e.character.homepage,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"homepage"})}),Object(o.jsx)("a",{href:e.character.wiki,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})};var x=u;s(16);class O extends a.Component{constructor(e){super(e),this.state={character:[],loading:!0,error:!1,newItemLoading:!1,offset:210,characterEnded:!1},this.marvelService=new j,this.onRequest=e=>{this.onCharacterListLoading(),this.marvelService.getAllCharacters(e).then(this.onCharacterLoaded).catch(this.onError)},this.onCharacterListLoading=()=>{this.setState({newItemLoading:!0})},this.onCharacterLoaded=e=>{let t=!1;e.length<9&&(t=!0),this.setState((s=>({character:[...s.character,...e],loading:!1,newItemLoading:!1,offset:s.offset+9,characterEnded:t})))},this.onError=()=>{this.setState({loading:!1,error:!0})},this.styleToSelectedCharacter=e=>{this.itemRefs.forEach((e=>{e.current&&e.current.classList.remove("char__item__selected")})),e.current&&e.current.classList.add("char__item__selected")},this.itemRefs=[]}componentDidMount(){this.onRequest()}renderItemsCharacter(e){const t=e.map((e=>{let t={objectFit:"cover"};"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===e.thumbnail&&(t={objectFit:"unset"});const s=c.a.createRef();return this.itemRefs.push(s),Object(o.jsxs)("li",{ref:s,className:"char__item",onClick:()=>{this.props.onCharacterSelected(e.id),this.styleToSelectedCharacter(s)},children:[Object(o.jsx)("img",{src:e.thumbnail,alt:e.name,style:t}),Object(o.jsx)("div",{className:"char__name",children:e.name})]},e.id)}));return Object(o.jsx)("ul",{className:"char__grid",children:t})}render(){const e=this.renderItemsCharacter(this.state.character),t=this.state.error?Object(o.jsx)(m,{}):null,s=this.state.loading?Object(o.jsx)(h,{}):null,a=this.state.loading||this.state.error?null:e;return Object(o.jsxs)("div",{className:"char__list",children:[t,s,a,Object(o.jsx)("button",{className:"button button__main button__long",disabled:this.state.newItemLoading,onClick:()=>this.onRequest(this.state.offset),style:{display:this.state.characterEnded?"none":"block"},children:Object(o.jsx)("div",{className:"inner",children:"load more"})})]})}}var g=O;s(17);var f=()=>Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(o.jsxs)("div",{className:"skeleton",children:[Object(o.jsxs)("div",{className:"pulse skeleton__header",children:[Object(o.jsx)("div",{className:"pulse skeleton__circle"}),Object(o.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(o.jsx)("div",{className:"pulse skeleton__block"}),Object(o.jsx)("div",{className:"pulse skeleton__block"}),Object(o.jsx)("div",{className:"pulse skeleton__block"})]})]});s(18);class _ extends a.Component{constructor(){super(...arguments),this.state={character:null,loading:!1,error:!1},this.marvelService=new j,this.onCharacterLoaded=e=>{this.setState({character:e,loading:!1})},this.onError=()=>{this.setState({loading:!1,error:!0})},this.onCharacterLoading=()=>{this.setState({loading:!0})},this.updateCharacter=()=>{this.onCharacterLoaded(),this.props.characterId&&this.marvelService.getCharacter(this.props.characterId).then(this.onCharacterLoaded).catch(this.onError)}}componentDidMount(){this.updateCharacter()}componentDidUpdate(e){this.props.characterId!==e.characterId&&this.updateCharacter()}render(){const e=this.state.error?Object(o.jsx)(m,{}):null,t=this.state.loading?Object(o.jsx)(h,{}):null,s=this.state.loading||this.state.error||!this.state.character?null:Object(o.jsx)(v,{character:this.state.character}),a=this.state.character||this.state.loading||this.state.error?null:Object(o.jsx)(f,{});return Object(o.jsxs)("div",{className:"char__info",children:[e,t,s,a]})}}const v=e=>{let t={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===e.character.thumbnail&&(t={objectFit:"contain"}),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"char__basics",children:[Object(o.jsx)("img",{src:e.character.thumbnail,alt:e.character.name,style:t}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"char__info-name",children:[" ",e.character.name]}),Object(o.jsxs)("div",{className:"char__btns",children:[Object(o.jsx)("a",{href:e.character.homepage,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"Homepage"})}),Object(o.jsx)("a",{href:e.character.wiki,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(o.jsx)("div",{className:"char__descr",children:e.character.description}),Object(o.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(o.jsx)("ul",{className:"char__comics-list",children:0===e.character.comics.length?Object(o.jsxs)("li",{className:"char__comics-item",children:["This character doesn't have comics. ",Object(o.jsx)("br",{})," Zero Carl, zero comics Caaarl."]}):e.character.comics.slice(0,11).map(((e,t)=>Object(o.jsx)("li",{className:"char__comics-item",children:e.name},t)))})]})};var C=_,y=s.p+"static/media/vision.067d4ae1.png";class N extends a.Component{constructor(){super(...arguments),this.state={selectedCharacter:null},this.onCharacterSelected=e=>{this.setState({selectedCharacter:e})}}render(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(x,{}),Object(o.jsxs)("div",{className:"char__content",children:[Object(o.jsx)(g,{onCharacterSelected:this.onCharacterSelected}),Object(o.jsx)(C,{characterId:this.state.selectedCharacter})]}),Object(o.jsx)("img",{className:"bg-decoration",src:y,alt:"vision"})]})}}var k=N,w=(s(19),s.p+"static/media/Avengers.4065c8f9.png"),S=s.p+"static/media/Avengers_logo.9eaf2193.png";var L=()=>Object(o.jsxs)("div",{className:"app__banner",children:[Object(o.jsx)("img",{src:w,alt:"Avengers"}),Object(o.jsxs)("div",{className:"app__banner-text",children:["New comics every week!",Object(o.jsx)("br",{}),"Stay tuned!"]}),Object(o.jsx)("img",{src:S,alt:"Avengers logo"})]});s(20);class T extends a.Component{constructor(e){super(e),this.state={comics:[],loading:!0,error:!1,offset:210,newItemLoading:!1,comicsEnded:!1},this.marvelService=new j,this.onRequest=e=>{this.onComicsListLoading(),this.marvelService.getAllComics(e).then(this.onComicsLoaded).catch(this.onError)},this.onComicsListLoading=()=>{this.setState({newItemLoading:!0})},this.onComicsLoaded=e=>{let t=!1;e.length<8&&(t=!0),this.setState((s=>({comics:[...s.comics,...e],loading:!1,newItemLoading:!1,offset:s.offset+8,comicsEnded:t})))},this.onError=()=>{this.setState({loading:!1,error:!0})},this.itemRefs=[]}componentDidMount(){this.onRequest()}renderItemsComics(e){const t=e.map((e=>{let t={objectFit:"cover"};"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===e.thumbnail&&(t={objectFit:"unset"});const s=c.a.createRef();return this.itemRefs.push(s),Object(o.jsx)("li",{ref:s,className:"comics__item",children:Object(o.jsxs)(n.b,{to:"/comics/".concat(e.id),children:[Object(o.jsx)("img",{src:e.thumbnail,alt:e.title,style:t,className:"comics__item-img"}),Object(o.jsx)("div",{className:"comics__item-name",children:e.title}),Object(o.jsx)("div",{className:"comics__item-price",children:e.price})]})},e.id)}));return Object(o.jsx)("ul",{className:"comics__grid",children:t})}render(){const e=this.renderItemsComics(this.state.comics),t=this.state.error?Object(o.jsx)(m,{}):null,s=this.state.loading?Object(o.jsx)(h,{}):null,a=this.state.loading||this.state.error?null:e;return Object(o.jsxs)("div",{className:"comics__list",children:[t,s,a,Object(o.jsx)("button",{className:"button button__main button__long",disabled:this.state.newItemLoading,onClick:()=>this.onRequest(this.state.offset),style:{display:this.state.comicsEnded?"none":"block"},children:Object(o.jsx)("div",{className:"inner",children:"load more"})})]})}}var R=T;var I=()=>Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(L,{}),Object(o.jsx)(R,{})]});var E=()=>Object(o.jsxs)("div",{children:[Object(o.jsx)(m,{}),Object(o.jsx)("p",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px"},children:"Page doesn't exist"}),Object(o.jsx)(n.b,{style:{display:"block",textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"30px"},to:"/",children:"Back to main page"})]});s(21);var A=()=>Object(o.jsxs)("header",{className:"app__header",children:[Object(o.jsx)("h1",{className:"app__title",children:Object(o.jsxs)(n.b,{to:"/",children:[Object(o.jsx)("span",{children:"Marvel"})," information portal"]})}),Object(o.jsx)("nav",{className:"app__menu",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(n.c,{end:!0,style:e=>{let{isActive:t}=e;return{color:t?"#9f0013":"inherit"}},to:"/",children:"Characters"})}),"/",Object(o.jsx)("li",{children:Object(o.jsx)(n.c,{nd:!0,style:e=>{let{isActive:t}=e;return{color:t?"#9f0013":"inherit"}},to:"/comics",children:"Comics"})})]})})]});s(22);const F=e=>{let{comic:t}=e;const{title:s,description:a,pageCount:c,thumbnail:i,language:r,price:l}=t;return Object(o.jsxs)("div",{className:"single-comic",children:[Object(o.jsx)("img",{src:i,alt:s,className:"single-comic__img"}),Object(o.jsxs)("div",{className:"single-comic__info",children:[Object(o.jsx)("h2",{className:"single-comic__name",children:s}),Object(o.jsx)("p",{className:"single-comic__descr",children:a}),Object(o.jsx)("p",{className:"single-comic__descr",children:c}),Object(o.jsx)("p",{className:"single-comic__descr",children:r}),Object(o.jsx)("div",{className:"single-comic__price",children:l})]}),Object(o.jsx)(n.b,{to:"/comics",className:"single-comic__back",children:"Back to all"})]})};var B=()=>{const{comicId:e}=Object(l.q)(),[t,s]=Object(a.useState)(null),[c,i]=Object(a.useState)(!0),[r,n]=Object(a.useState)(!1),d=new j;Object(a.useEffect)((()=>{b()}),[e]);const b=()=>{i(!0),d.getComic(e).then(u).catch((e=>{n(!0),i(!1)}))},u=e=>{s(e),i(!1)},p=r?Object(o.jsx)(m,{}):null,x=c?Object(o.jsx)(h,{}):null,O=c||r||!t?null:Object(o.jsx)(F,{comic:t});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(L,{}),p,x,O]})};class M extends a.Component{constructor(){super(...arguments),this.state={selectedCharacter:null},this.onCharacterSelected=e=>{this.setState({selectedCharacter:e})}}render(){return Object(o.jsx)(n.a,{children:Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(A,{}),Object(o.jsx)("main",{children:Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/",element:Object(o.jsx)(k,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/comics",element:Object(o.jsx)(I,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/comics/:comicId",element:Object(o.jsx)(B,{})}),Object(o.jsx)(l.a,{exact:!0,path:"*",element:Object(o.jsx)(E,{})})]})})]})})}}var D=M;s(23);r.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(D,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.d4aa3a6b.chunk.js.map